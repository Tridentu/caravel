#!/usr/bin/bash
choice=$(whiptail --title "Emacs Setup" --menu "Choose an Emacs distro to install:" 25 75 15 "Spacemacs" "Spacemacs" "Doom" "Doom Emacs" "Prelude" "Prelude Emacs" "Centaur" "Centaur Emacs")

 emacsRepo=""
    echo 0 | whiptail --gauge "Backing up previous emacs config..." 6 50
    mv ~/.emacs.d/ ~/.emacs.d.prev/
    echo 33 | whiptail --gauge "Processing repo choice..." 6 50
    case $1 in
	Spacemacs)
	    emacsRepo=https://github.com/syl20bnr/spacemacs
	    ;;
	Doom)
	    emacsRepo=https://github.com/hlissner/doom-emacs
	    ;;
	Prelude)
	    emacsRepo=https://github.com/bbatsov/prelude
	    ;;
	Centaur)
	    emacsRepo=https://github.com/seagle0128/.emacs.d
	    ;;
	"<--Back")
	    emacsRepo="back"
	    ;;
    esac
    echo 66 | whiptail --gauge "Installing the new config..." 6 50;
    if [[ emacsRepo == "back"  ]]; then
	echo "No repo chosen, reverting to previous installation..."
	mv ~/.emacs.d.prev ~/.emacs.d
    else
	git clone $emacsRepo  ~/.emacs.d
    fi
    echo 100 | whiptail --gauge "Done. Remember to start emacs and press any key to continue." 6 50
    read key;
